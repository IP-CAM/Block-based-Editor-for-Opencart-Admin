<!DOCTYPE html>
<html lang="en">
<meta content="light dark" name="color-scheme" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<style>
/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Remove default margin in favour of better control in authored CSS */
body, h1, h2, h3, h4, p,
figure, blockquote, dl, dd {
  margin-block-end: 0;
}

/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set core body defaults */
body {
  min-height: 100vh;
  line-height: 1.5;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2,
h3, h4 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture {
  max-width: 100%;
  display: block;
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
  font-family: inherit;
  font-size: inherit;
}

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5ex;
}
body {
  font-family: Arial, sans-serif;
  font-size: 1rem;
  font-weight: 500;
  max-width: 100%;
  margin: 0;
  padding: 0;
  position: relative;
  width: 100%;
}
.results {
  /*max-width: calc(80vw - 120px);**/
  min-height: 300px;
  margin: auto;
  margin-top: 2rem;
  border: none;
  background: #0088ff08;
  padding: 1rem;
  color: inherit;
  width: 100%;
  font-size: inherit;
}
:root {--color-white: light-dark(#fff, #555);--color-black: light-dark(#000, #fff);--link: light-dark(blue, cyan);--fontsize: 1.05rem;--menuWidth: 100px;--button-padding: 0.75rem 1rem;--button-font-size: 1.2rem;--button-bg-color: light-dark(white, black);--button-text-color: light-dark(black, white);--button-border-color: rgba(0, 0, 0, 0.1);}.editor {position: relative;width: 100%;padding: 5rem 1rem 3rem 1rem;border: solid 1px #ccc;border-radius: 1rem;box-shadow: 1px 3px 5px #cccccc63;background: light-dark(var(--color-white), #111);height: 100%;overflow: auto;font-size: var(--fontsize);}.editor blockquote {border-left: solid;padding-left: 1rem;}.editor .bottombar {display: flex;gap: .25rem;margin-top: 3rem;flex-wrap: wrap;}.editor button {border-radius: 0;font-size: var(--fontsize);display: inline-block;}.blocks .menuOnOff {position: absolute;border: none;right: calc(100% + 1rem);top: 26px;background: var(--color-black);width: var(--menuWidth);display: inline-block;align-items: center;justify-content: end;color: var(--color-white);font-size: 1rem;padding: .25rem .5rem;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;cursor: pointer;}.editor .bottombar > button {background: var(--color-black);color: var(--color-white);border: none;display: inline-flex;width: 36px;height: 36px;font-size: 1.5rem;justify-content: center;align-items: center;cursor: pointer;user-select: none;font-family: inherit;border-radius: .25rem;}.editor button.generate, .editor button.addImg, .editor button.addVideo, .editor button.addTable {width: fit-content;padding: .5rem .75rem;font-size: 1.1rem;line-height: 1;}.editor .block {position: relative;background-color: light-dark(#f0f0f02e, #22222282);margin: 1rem 0;position: relative;white-space: pre-wrap;user-select: text;-webkit-user-select: text;line-height: 1.5;}.editor .tempblock {position: relative;padding: 5px 0 8px 0;}.editor .tempblock figure:has(figcaption) + .menu > .imgAdd, .editor .tempblock figure:not(:has(figcaption)) + .menu > .imgRemove, .tempblock > div:has(table):has(caption) + .menu .addCaption, .tempblock > div:has(table):not(:has(caption)) + .menu .removeCaption {display: none;}table:has(caption) + .menu .addCaption {display: none;}.editor ul.menu {list-style: none;display: none;position: absolute;width: max-content;right: calc(100% + 10px);top: 0;background-color: var(--color-white);margin: 0;padding: .25rem;user-select: none;z-index: 1;box-shadow: 1px 1px 5px #ccc;height: 200px;overflow-x: auto;scrollbar-width: thin;text-wrap: nowrap;}.editor .menu > button.removeBlock {background: red;color: #fff;}.editor .menu > button {cursor: pointer;margin: 2px;user-select: none;padding: .25em 1em;border-radius: 0;background: var(--color-white);width: 100%;display: block;font-size: 1rem;font-family: inherit;font-weight: bold;font-stretch: expanded;text-align: left;color: inherit;line-height: 1.5;border: none;letter-spacing: -.3px;}.editor .menu > button:not(.removeBlock):hover {background: #cccccc80;}.editor .menu > button[disabled] {cursor: not-allowed;opacity: .5;color: light-dark(#000,#ccc);}.editor div:first-child button.moveUp, .editor div:last-child button.moveDown {background: #ccc;pointer-events: none;}@media (orientation: landscape) {.editor .blocks, .editor .bottombar{padding-left: 180px;}.editor blockquote, p, div, ul, ol, caption, figcaption {font-size: 1rem;}abbr[title]:hover::after, abbr[title]:focus::after {content: attr(title);position: absolute;left: 0;bottom: -30px;width: auto;white-space: nowrap;background-color: light-dark(#1e1e1e, #5b5b5b);color: #fff;border-radius: 3px;box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.4);font-size: 14px;padding: 3px 5px;}}.editor button:hover {opacity: .8;}.editor ul li, .editor ol li{margin: 1rem 0 }h1,h2,h3,h4,h5,h6,p,ul,ol,div{position:relative;}.editor h1 {font-size: 2rem;line-height: 1.3;letter-spacing: -1px;}.editor h2 {font-size: 1.8rem;line-height: 1.3;letter-spacing: -1px;}.editor h3 {font-size: 1.7rem;line-height: 1.3;letter-spacing: -1px;}.editor h4 {font-size: 1.5rem;line-height: 1.2;}.editor h5 {font-size: 1.3rem;line-height: 1.2;}.editor h6 {font-size: 1.1rem;line-height: 1.2;}.editor p, .editor ul, .editor ol {line-height: 1.8;}.editor section h2, .editor section h3, .editor section h4,.editor section h5,.editor section h6 {font-size: larger;margin: 0;padding: 0;}.block::selection {color: #fff;background-color: #0064ff;}@media (orientation: portrait) {.editor blockquote, p, div, ul, ol, caption, figcaption {font-size: 20px;}.editor {max-width: 100%;margin: auto;padding: 4rem 1rem;}.editor ul.menu {top: calc(100% - 45px);left: 0;}@media screen and (max-width: 600px){.editor ul.menu {top: inherit;left: 2.5%;bottom: 0;position: fixed;width: 95%;max-width: inherit;right: 0;padding: 0;height: 300px;z-index: 10000;overflow-y: auto;}}abbr::after{content: ' (' attr(title) ') ';}.editor .menu button {font-size: 1.1rem;}.editor .toolbar {width:100%;overflow:auto}.blocks figure.block::before, .blocks h1.block::before, .blocks h2.block::before, .blocks h3.block::before, .blocks h4.block::before, .blocks h5.block::before, .blocks h6.block::before, .blocks p.block::before, .blocks ul.block::before, .blocks ol.block::before, .blocks div.block::before {top: -26px;left: 0;}.editor .topMenu {left: var(--menuWidth);width: calc(100% - var(--menuWidth)) !important;}.editor .topMenu::before {max-width: 100%;}.toolbar {left: 0 !important;}.blocks .menuOnOff {left: 0;top: -16px !important;cursor: pointer;justify-content: center;}.editor .tempblock:not(:has(.block:focus)):hover ul.menu, .editor .tempblock:not(:has(.block:focus)):hover .topMenu {//display: none !important;}}.editor .toolbar {position: absolute;background: var(--color-white);padding: 0;z-index: 1000;border: none;box-shadow: 1px 1px 3px #8c8c8c;display: none;margin: 0;color: var(--color-black);}.editor .toolbar.active {display: flex;}.editor .toolbar.active .format.disabled {pointer-events: none;opacity: .5;background: #0202023d;}.toolbar > button {margin: 0;padding: var(--button-padding);border: none;background: var(--button-bg-color);border-right: solid 1px var(--button-border-color);cursor: pointer;font-size: var(--button-font-size);font-family: inherit;color: var(--button-text-color);min-height: 48px;transition: background 0.3s, color 0.3s, box-shadow 0.3s;box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);z-index:1;}.toolbar > button:hover {background: darken(var(--button-bg-color), 5%);color: lighten(var(--button-text-color), 10%);}.toolbar > button:focus {outline: none;box-shadow: 0 0 0 3px rgba(0, 0, 255, 0.5);}.toolbar > button:last-child {border-right: none;}.editor .block a {color: var(--link);cursor: pointer;}.editor .topMenu {display: none;margin: 0;padding: 0;position: absolute;z-index: 1;width: 100%;text-align: right;top: -24px;}.editor .menu.active, .editor .topMenu.active {display: block !important;}.editor .topMenu > button:hover {background: var(--color-black);color: var(--color-white);}.editor .topMenu::before {content: "";display: block;width: 100%;background: #ccc;height: 1px;margin-top: 18px;position: absolute;z-index: -1;}.editor .topMenu > button {font-size: 1rem;font-family: inherit;cursor: pointer;margin: 0;padding: .5rem .5rem;background: var(--color-white);color: var(--color-black);border-top: solid 1px;border-left: solid 1px;border-bottom: solid 1px;border-right: none;border-radius: 0;letter-spacing: -.3px;}.editor .topMenu > button:last-child {border-right: solid 1px;}.editor .topMenu button:hover {opacity: 1;}@media (orientation: landscape) {.editor .tempblock:not(:has(.block:focus)):hover .topMenu {display: block;}}.editor [contenteditable]:empty::after {content: attr(data-placeholder);color: grey;display: inline-block;}.editor [contenteditable]:empty {padding-left: 2px;}.editor [contenteditable]:focus {outline:auto;user-select: text;-webkit-user-select: text;}.editor div:has(table) {width: 100%;}.editor div > table {border-collapse: collapse;width: 100%;}.editor div > table th, td {text-align: left;padding: 8px;}.editor div > table tr:nth-child(even) {background-color: #cecece36;}.editor div > table > caption {padding: .5rem 0;font-weight: bold;line-height: 1.5;}.editor figcaption {padding: .25rem 0;line-height: 1.5;}.editor .saved-item {display: flex;gap: 1rem;padding: .5rem 1rem;background: #ff000008;color: light-dark(red, #ff9696);align-items: center;margin-bottom: 2rem;flex-wrap: wrap;}.editor .saved-item > button {font-size: inherit;border: solid 1px;background: none;font-weight: bold;cursor: pointer;color: light-dark(red, white);display: flex;align-content: center;}[contenteditable="true"]{-webkit-user-select: text;-moz-user-select: text;-ms-user-select: text;user-select: text;-webkit-user-modify: read-write;}.editor strong, .editor b, .editor italic, .editor u, .editor a, .editor code, .editor em, .editor q, .editor mark, .editor del, .editor abbr{z-index:1;user-select: text;pointer-events: all;cursor: pointer;display: inline-block;}.editor mark{font-style: normal;text-shadow: 1px 1px 1px #fff;background: #ffff00e3;}.editor code {background: light-dark(#0000000f, #6f6f6f);word-wrap: break-word;box-decoration-break: clone;padding: 0 .1rem .05rem;border-radius: .3rem;}.editor abbr {cursor: help;text-decoration-style: dotted;text-underline-offset: 5px;user-select: all;}.editor kbd {background-color: #eee;border-radius: 3px;border: 1px solid #b4b4b4;box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 2px 0 0 rgba(255, 255, 255, 0.7) inset;color: #333;display: inline-block;font-size: 0.85em;font-weight: 700;line-height: 1;padding: 3px 3px 5px;white-space: nowrap;align-content: center;cursor: pointer;user-select: all;}.editormenu {background: none;border: none;position: absolute;top: 1rem;right: 1rem;cursor: pointer;user-select: none;padding: 0;font-size: 1rem;display: flex;gap: 1rem;}.editormenu > button,.editormenu > a {z-index:1;padding:.5rem;background: transparent;border: none;user-select: none;cursor: pointer;font-weight: bold;display: block;box-sizing: border-box;}button.boldButton {font-weight: bolder;}button.delButton {text-decoration-line: line-through;}button.italicButton {font-style: italic;}button.underlineButton {text-decoration: underline;}.editor .block a::after {content: " [" attr(target) "]";color: inherit;text-decoration: none;font-size: 80%;vertical-align: super;position: relative;display: inline-block;}.previewdialog {position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);padding: 20px;border-radius: 8px;box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);max-width: 80vw;width: 100%;margin: 0;max-height: calc(90vh - 100px);overflow: auto;z-index: 1;}.previewdialog .previewClose {position: absolute;top: 0;right: 0;background: #000;color: #fff;border: none;padding: .5rem 1rem .5rem;font-size: 1rem;cursor: pointer;user-select: none;font-weight: bold;display: inline-block;z-index:1;}.previewdialog > .previewbox {display: flex;flex-direction: column;gap: .5rem;font-size: 1rem;font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;padding: .25rem .75rem;}dialog::backdrop {background: #000;opacity: .75;}.linkdialog {position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);padding: 20px;border-radius: 8px;box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);max-width: 500px;width: 95%;margin: 0;}.linkdialog > .dialogbox {display: flex;flex-direction: column;gap: .5rem;font-size: 1rem;font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;padding: .25rem .75rem;}.linkdialog > .dialogbox > div:first-child {font-weight: bold;}.linkdialog > .dialogbox > .inputbox {display: flex;flex-direction: column;gap: .25rem;}.linkdialog > .dialogbox > .inputbox > input, .linkdialog > .dialogbox > .inputbox > select {padding: .5rem;font-size: 1rem;}.linkdialog > .dialogbox > .inputbox > label {font-size: .9rem;}.linkdialog > .dialogbox > .inputcontrol {display: flex;gap: .5rem;margin: .5rem 0;}.linkdialog > .dialogbox > .inputcontrol > button {background: #000;color: #fff;padding: .5rem;font-size: 1rem;border: none;user-select: none;cursor: pointer;border-radius: .25rem;text-wrap: nowrap;}.highlight {animation: highlight linear 1s;}@keyframes highlight {from {background: yellow;}to {background: transparent;}}@media (orientation: landscape) {[contenteditable] a:hover::before {content: attr(href);position: absolute;left: 0;bottom: -30px;width: auto;white-space: nowrap;background-color: light-dark(#1e1e1e, #5b5b5b);color: #fff;border-radius: 3px;box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.4);font-size: 14px;padding: 3px 5px;}[contenteditable] a{position:relative;}button.format::before {border-style: solid;border-width: 0.3rem;content: "";opacity: 0;position: absolute;visibility: hidden;border-color: rgba(51, 51, 51, 0.9) transparent transparent transparent;top: -6px;left: 50%;margin-left: -0.3rem;}button.format{position:relative;}button.format:hover::after, button.format:hover::before {visibility: visible;opacity: 1;}button.format::after{bottom: 110%;left: 50%;transform: translate(-50%);}button.format::after {background-color: #000;border-radius: 0.3rem;color: #fff;content: attr(aria-label);font-size: 1rem;font-size: 80%;font-weight: normal;line-height: 1.15rem;opacity: 0;padding: 0.25rem 0.5rem;position: absolute;text-align: center;text-transform: none;visibility: hidden;white-space: nowrap;z-index: 1;}button.format {cursor: pointer;line-height: 1;}}abbr[title] {position: relative;text-decoration-style: dotted;}[aria-current="true"], .editor .tempblock {scroll-margin-bottom: 200px;scroll-margin-top: 150px;}
dialog.previewdialog {html, address, blockquote, body, dd, div, dl, dt, fieldset, form, frame, frameset, h1, h2, h3, h4, h5, h6, noframes, ol, p, ul, center, dir, hr, menu, pre {display: block !important;unicode-bidi: embed !important;line-height: 1.5 !important;}li {display: list-item !important;margin: 1rem 0;}table {display: table !important;border-spacing: 2px !important;width:100%;}tr {display: table-row !important;}thead {display: table-header-group !important;}tbody {display: table-row-group !important;}tfoot {display: table-footer-group !important;}td, th {display: table-cell !important;vertical-align: inherit !important;}caption {font-weight:bold;display: table-caption !important;text-align: center !important;}th {font-weight: bolder !important;text-align: center !important;}h1 {font-size: 2em !important;margin: .67em 0 !important;}h2 {font-size: 1.9em !important;margin: .75em 0 !important;}h3 {font-size: 1.8em !important;margin: .83em 0 !important;}h4, p, blockquote, ul, fieldset, form, ol, dl, dir, menu {margin: 1.12em 0 !important;}h5 {font-size: 1.5em !important;margin: 1.5em 0 !important;}h6 {font-size: 1.4em !important;margin: 1.67em 0 !important;}h1, h2, h3, h4, h5, h6, b, strong {font-weight: bolder !important;}blockquote {padding-left: 20px !important;padding-right: 20px !important;border-left: solid 5px;}i, cite, em, var, address {font-style: italic !important;}pre, tt, code, kbd, samp {font-family: monospace !important;border-radius: 3px;padding: .1rem .25rem;border: solid 1px;}pre {white-space: pre !important;}button, textarea, input, select {display: inline-block !important;}big {font-size: 1.17em !important;}small, sub, sup {font-size: .83em !important;}sub {vertical-align: sub !important;}sup {vertical-align: super !important;}thead, tbody, tfoot {vertical-align: middle !important;}s, strike, del {text-decoration: line-through !important;}hr {border: 1px inset !important;}ol {list-style-type: decimal !important;}ol ul, ul ol, ul ul, ol ol {margin-top: 0 !important;margin-bottom: 0 !important;}u, ins {text-decoration: underline !important;}br:before {content: "\A" !important;white-space: pre-line !important;}center {text-align: center !important;}:link, :visited {text-decoration: underline !important;color: light-dark(blue, cyan) !important;}:focus {outline: thin dotted invert !important;}div:has(table), figure{margin: 3rem 0;width: 100%;overflow: auto;}figcaption{margin-top: .5rem;}h1, h2, h3, h4, h5, h6{letter-spacing:-1px;}}
</style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrick Chia Block-Based Editor</title>
</head>
<body>
		
<div id="editor" class="editor" aria-label="Rich text editor">
	<div class="editormenu">
		<a target="_new" href="https://mypatricks.github.io/block-based-editor-for-opencart-admin/" rel="noopener">Project Home</a>
		<button type="button" accesskey="p" class="preview" aria-modal="true" data-editor="editor">Preview</button>
		<button type="button" accesskey="f" class="fullscreen" data-editor="editor">Fullscreen</button>
	</div>

	<div id="blocks" class="blocks"></div>
	<div class="bottombar">
		<button type="button" accesskey="n" aria-label="Add Block" data-editor="editor" class="addBlock">+</button>
		<button type="button" accesskey="i" aria-label="Add Image Block" data-editor="editor" class="addImg">+Image</button>
		<button type="button" accesskey="v" aria-label="Add Video Block" data-editor="editor" class="addVideo">+Video</button>
		<button type="button" accesskey="t" aria-label="Add Table Block" data-editor="editor" class="addTable">+Table</button>
		<button type="button" accesskey="g" aria-label="Output" data-editor="editor" data-box="results" class="generate">Generate</button>
	</div>
		<textarea id="results" class="results" data-editor="editor">&lt;h1&gt;The HTML Section Heading Block&lt;/h1&gt;&lt;p&gt;The &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; to &lt;code&gt;&amp;lt;h6&amp;gt;&lt;/code&gt;&lt;abbr title=&quot;Hypertext Markup Language&quot;&gt;HTML&lt;/abbr&gt; elements represent six levels of section headings. &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; is the highest section level and &lt;code&gt;&amp;lt;h6&amp;gt;&lt;/code&gt; is the lowest. By default, &lt;strong&gt;all heading elements&lt;/strong&gt; create a block-level box in the layout, starting on a new line and taking up the full width available in their containing block.&lt;/p&gt;&lt;h2&gt;The Ordered List and Unordered List Bock&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;The &lt;code&gt;&amp;lt;ol&amp;gt;&lt;/code&gt;&lt;abbr title=&quot;Hypertext Markup Language&quot;&gt;HTML&lt;/abbr&gt; element represents an ordered list of items — typically rendered as a numbered list.&lt;/li&gt;&lt;li&gt;Typically, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a&quot; target=&quot;_self&quot; rel=&quot;noopener&quot;&gt;ordered list&lt;/a&gt; items display with a preceding marker, such as a &lt;u&gt;number&lt;/u&gt; or &lt;u&gt;letter&lt;/u&gt;.&lt;/li&gt;&lt;li&gt;To determine which list to use, try changing the order of the list items; if the meaning changes, use the &lt;code&gt;&amp;lt;ol&amp;gt;&lt;/code&gt; element — otherwise you can use &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt; otherwise, or &lt;code&gt;&amp;lt;menu&amp;gt;&lt;/code&gt; if your list is a menu.&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;The &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt;&lt;abbr title=&quot;Hypertext Markup Language&quot;&gt;HTML&lt;/abbr&gt; element represents an unordered list of items, typically rendered as a bulleted list. &lt;/li&gt;&lt;li&gt;The &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt; element is for grouping a collection of items that do not have a numerical ordering, and their order in the list is meaningless. Typically, unordered-list items are displayed with a bullet, which can be of several forms, like a dot, a circle, or a square. The bullet style is not defined in the &lt;abbr title=&quot;Hypertext Markup Language&quot;&gt;HTML&lt;/abbr&gt; description of the page, but in its associated &lt;abbr title=&quot;Cascading Style Sheets&quot;&gt;CSS&lt;/abbr&gt;, using the list-style-type property.&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;The Block Quotation&lt;/h2&gt;&lt;blockquote&gt;&lt;em&gt;According to the specification&lt;/em&gt;, attribution for the quotation, if any, must be placed outside the &lt;code&gt;&amp;lt;blockquote&amp;gt;&lt;/code&gt; element. To include shorter quotes inline rather than in a separate block, use the &lt;code&gt;&amp;lt;q&amp;gt;&lt;/code&gt; (Quotation) element.&lt;/blockquote&gt;&lt;h2&gt;The Keyboard Input element&lt;/h2&gt;&lt;p&gt;Nesting a &lt;code&gt;&amp;lt;samp&amp;gt;&lt;/code&gt; element inside a &lt;code&gt;&amp;lt;kbd&amp;gt;&lt;/code&gt; element, on the other hand, represents input which is based on text presented by the system, such as the names of menus and menu items, or the names of buttons displayed on the screen. See the example under &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/kbd#representing_onscreen_input_options&quot; target=&quot;_self&quot; rel=&quot;noopener&quot;&gt;Representing onscreen input options&lt;/a&gt; below.&lt;/p&gt;&lt;section&gt;&lt;h2&gt;To utilize the control key, you must first select or focus on a block.&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;B&lt;/kbd&gt; Bold Text.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;I&lt;/kbd&gt; Italic Text&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;U&lt;/kbd&gt; Underline Text&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;K&lt;/kbd&gt; Keyboard Element (Text Automatically Converted to Uppercase)&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;L&lt;/kbd&gt; Insect Link Tag&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;Q&lt;/kbd&gt; Quote Text Element&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;M&lt;/kbd&gt; Highlight Selected Text&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;D&lt;/kbd&gt; Stroke-line Text&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;E&lt;/kbd&gt; Abbreviation Select Text (Title will apply to all instances in the article)&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;1&lt;/kbd&gt; to &lt;kbd&gt;6&lt;/kbd&gt; Convert to H1 - H6 Tag &lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;7&lt;/kbd&gt; Convert to Paragraph&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;8&lt;/kbd&gt; Convert to OL.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;9&lt;/kbd&gt; Convert to UL.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;0&lt;/kbd&gt; Convert to DIV.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;DELETE&lt;/kbd&gt; Delete Block.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;►&lt;/kbd&gt; Move to next block.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;◄&lt;/kbd&gt; Move to previous block.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;▲&lt;/kbd&gt; Move the current block up one.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;▼&lt;/kbd&gt; Move the current block down one.&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;G&lt;/kbd&gt; Preview&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Major Access Key&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;P&lt;/kbd&gt; Preview&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;F&lt;/kbd&gt; Fullscreen&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;N&lt;/kbd&gt; Add new block&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;I&lt;/kbd&gt; Add new Image block&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;V&lt;/kbd&gt; Add Video block&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;T&lt;/kbd&gt; Add Table block&lt;/li&gt;&lt;li&gt;&lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;G&lt;/kbd&gt; Generate&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;</textarea>

</div>


<script type="text/javascript">
'use strict';
/*!
 * Block Based Editor for OpenCart
 * https://chiaseek.com/
 * This project is developed and sponsored by CakeDeliver.com, a company dedicated to delivering high-quality baked goods and exceptional service.
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 *
 * Date: 2024-12-20T13:37
 */ 
const debounce=(e,t=300)=>{if("function"!=typeof e)throw new TypeError("Expected a function");let o;const n=function(...n){const a=this;clearTimeout(o),o=setTimeout((()=>{e.apply(a,n)}),t)};return n.cancel=()=>{clearTimeout(o),o=null},n},editors=document.querySelectorAll(".editor");for(let e=0;e<editors.length;e++){const t=editors[e].id;document.querySelector("#"+t+" .generate").addEventListener("click",(function(){this.textContent="Generating...",generate(t)})),document.querySelector("#"+t+" .addImg").addEventListener("click",(()=>addImageBlock(t,!1))),document.querySelector("#"+t+" .addVideo").addEventListener("click",(()=>addVideoBlock(t,!1))),document.querySelector("#"+t+" .addBlock").addEventListener("click",(()=>addBlock(t,!1))),document.querySelector("#"+t+" .addTable").addEventListener("click",(()=>addTable(t,!1)));let o=document.querySelector("#"+t);o.addEventListener("click",debounce((e=>{e.preventDefault();const n=e.target.getAttribute("data-block"),a=document.getElementById("TB"+n),l=e.target.closest(".tempblock");if(e.target.classList.contains("removeBlock")){let e;if(l.nextElementSibling?e=l.nextElementSibling.querySelector(".block"):l.previousElementSibling&&(e=l.previousElementSibling.querySelector(".block")),l&&e){const t=e.querySelector("table");if(t){t.querySelector("td:first-child").focus()}else"SECTION"===e.tagName||["OL","UL"].includes(e.tagName)?e.firstElementChild.focus():e.focus();e.scrollIntoView({behavior:"instant",block:"nearest"})}a.previousElementSibling;if(""===document.getElementById(n).innerText.trim())a.remove();else{confirm("Are you sure you want to delete this block?")&&a.remove()}}const r=document.querySelector("#"+t+" .blocks");if(e.target.classList.contains("moveUp")&&l&&l.previousElementSibling&&(r.insertBefore(l,l.previousElementSibling),l.classList.add("highlight"),setTimeout((()=>{l.classList.remove("highlight")}),1e3),l.scrollIntoView({behavior:"smooth",block:"nearest"})),e.target.classList.contains("moveDown")&&l&&l.nextElementSibling&&(r.insertBefore(l.nextElementSibling,l),l.classList.add("highlight"),setTimeout((()=>{l.classList.remove("highlight")}),1e3),l.scrollIntoView({behavior:"smooth",block:"nearest"})),e.target.classList.contains("menuOnOff")){const t=document.querySelectorAll(".toolbar"),o=document.querySelectorAll(".menuOnOff");for(let e=0;e<o.length;e++){o[e].setAttribute("aria-expanded",!1)}e.target.setAttribute("aria-expanded",!0);for(let e=0;e<t.length;e++){t[e].classList.remove("active")}let a=document.querySelector("#MN"+n),l=document.querySelector("#TM"+n);a.classList.contains("active")?(a.classList.remove("active"),l.classList.remove("active")):(a.classList.add("active"),l.classList.add("active"))}o.addEventListener("click",(e=>closeMenu(e)));let c={h1:()=>convertToTag(t,n,"h1"),h2:()=>convertToTag(t,n,"h2"),h3:()=>convertToTag(t,n,"h3"),h4:()=>convertToTag(t,n,"h4"),h5:()=>convertToTag(t,n,"h5"),h6:()=>convertToTag(t,n,"h6"),div:()=>convertToTag(t,n,"div"),blockquote:()=>convertToTag(t,n,"blockquote"),preCode:()=>convertToTag(t,n,"pre"),p:()=>convertToTag(t,n,"p"),ol:()=>convertToTag(t,n,"ol"),ul:()=>convertToTag(t,n,"ul"),sectionol:()=>convertToTag(t,n,"sectionol"),sectionul:()=>convertToTag(t,n,"sectionul"),section:()=>convertToTag(t,n,"section"),editTag:()=>sectionOption(n,"tag"),addparagraph:()=>sectionOption(n,"addparagraph"),addBtnBlock:()=>addBlock(t,n),addImageBlock:()=>addImageBlock(t,n),imgAlt:()=>imageOption(n,"alt"),imgUpload:()=>imageUpload(n),imgURL:()=>imageOption(n,"link"),imgWidth:()=>imageOption(n,"width"),imgHeight:()=>imageOption(n,"height"),imgRemove:()=>imageOption(n,"removeCaption"),imgAdd:()=>imageOption(n,"addCaption"),imgCrossOrigin:()=>imageOption(n,"crossorigin"),embedURL:()=>embedOption(n,"link"),embedCrossOrigin:()=>embedOption(n,"crossorigin"),embedWidth:()=>embedOption(n,"width"),embedHeight:()=>embedOption(n,"height"),removeCaption:()=>tableOption(n,"removeCaption"),addCaption:()=>tableOption(n,"addCaption"),addRow:()=>tableOption(n,"addRow"),removeRow:()=>tableOption(n,"removeRow"),addCol:()=>tableOption(n,"addColumn"),removeCol:()=>tableOption(n,"removeColumn")};for(let[t,o]of Object.entries(c))if(e.target.classList.contains(t)){o();break}if(e.target.classList.contains("tempblock")||e.target.classList.contains("editor")){const e=document.querySelectorAll(".toolbar");for(let t=0;t<e.length;t++)e[t].classList.remove("active");const t=document.querySelectorAll("[contenteditable]");for(let e=0;e<t.length;e++)t[e].setAttribute("contenteditable",!1);const o=document.querySelectorAll(".menuOnOff");for(let e=0;e<o.length;e++)o[e].setAttribute("aria-expanded",!1)}}),300)),o.addEventListener("focus",(e=>{if(e.target.matches("[contenteditable]")){let t=e.target.id||e.target.dataset.block,o=document.getElementById("TBAR"+t);const n=document.querySelectorAll(".toolbar");for(let e=0;e<n.length;e++)n[e].classList.remove("active");const a=document.querySelectorAll("[contenteditable]");for(let e=0;e<a.length;e++)a[e].setAttribute("contenteditable",!1),a[e].setAttribute("aria-current",!1),a[e].setAttribute("inputmode","text"),a[e].setAttribute("spellcheck",!1);e.target.setAttribute("contenteditable",!0),e.target.setAttribute("aria-current",!0),e.target.setAttribute("spellcheck",!0),o.classList.add("active"),setCarats(e.target)}}),!0);const n=()=>{document.fullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),l.textContent="Fullscreen"):(o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen(),l.textContent="Exit Fullscreen")},a=()=>{document.fullscreenElement?l.textContent="Exit Fullscreen":l.textContent="Fullscreen"},l=document.querySelector("#"+t+" .fullscreen");l.addEventListener("click",n),document.addEventListener("fullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),document.addEventListener("msfullscreenchange",a);const r=document.querySelector("#"+t+" .preview"),c=e=>{e.close(),e.remove()};r.addEventListener("click",(()=>{generate(t);const e=previewDialog(t);document.body.appendChild(e),e.showModal();e.querySelector(".previewClose").addEventListener("click",(()=>c(e)))}));const i=e=>{let t=document.createElement("div");t.id="saveItem"+e,t.classList.add("saved-item");for(let o=0;o<localStorage.length;o++)if(localStorage.key(o)===e){let o=localStorage.getItem(e+"-date");t.textContent=o?"Found Saved: Draft "+o:"Found Saved: Draft ";let n=document.createElement("button");n.dataset.editor=e,n.type="button",n.textContent="Restored";let a=document.createElement("button");a.type="button",a.dataset.editor=e,a.textContent="Clear",a.addEventListener("click",(()=>{let e=a.dataset.editor;localStore.clear(e),localStore.clear(e+"-date"),document.getElementById("saveItem"+e).remove()})),n.addEventListener("click",(()=>{let e=n.dataset.editor,t=localStorage.getItem(e);if(t){const o=document.querySelector("#"+e+" .results");document.getElementById(o.id).value=restoreAngleBrackets(t),processContent(e,o.id),document.getElementById("saveItemeditor").textContent="Restored Done."}})),t.appendChild(n),t.appendChild(a),document.querySelector("#"+e+" .blocks").insertAdjacentElement("beforebegin",t)}};i(t),setInterval((function(){let e=localStorage.getItem(t),o=e?e.length:0,n=document.querySelector("#"+t+" .results").value;o!==(n?replaceAngleBrackets(n).length:0)&&generate(t)}),6e4)}const previewDialog=e=>{let t,o=document.querySelector("#"+e+" .results").value;t=o.length>10?o:"No Content";const n=document.createElement("dialog");n.id="preview-"+Date.now()%1e4,n.className="previewdialog",n.setAttribute("aria-modal",!0);const a=document.createElement("div");a.className="previewbox",a.innerHTML=t;const l=document.createElement("button");return l.type="button",l.className="previewClose",l.innerText="Close",n.appendChild(l),n.appendChild(a),n},createLinkDialog=()=>{const e=document.createElement("dialog");e.id="dialog-"+Date.now()%1e4,e.className="linkdialog",e.setAttribute("aria-modal",!0);const t=document.createElement("div");t.className="dialogbox";const o=document.createElement("div");o.textContent="Edit Link",t.appendChild(o);[{label:"URL Text:",id:"linkText",mode:"text",className:"linkText",type:"text"},{label:"URL:",id:"url",mode:"url",className:"url",type:"text"},{label:"URL rel:",id:"rel",mode:"text",className:"rel",type:"text"},{label:"Block:",id:"block",mode:"text",className:"block",type:"hidden"},{label:"URL target:",id:"target",mode:"none",className:"target",type:"select",options:["_self","_blank","_parent","_top"]}].forEach((e=>{const o=document.createElement("div");o.className=" inputbox";const n=document.createElement("label");if(n.setAttribute("for",e.id),n.textContent=e.label,"hidden"!==e.type&&o.appendChild(n),"select"===e.type){const t=document.createElement("select");t.id=e.id,t.className=e.className+" linkTarget",e.options.forEach((e=>{const o=document.createElement("option");o.value=e,o.textContent=e,t.appendChild(o)})),o.appendChild(t)}else{const t=document.createElement("input");t.type=e.type,t.id=e.id,t.className=e.className,e.mode&&t.setAttribute("inputmode",e.mode),o.appendChild(t)}t.appendChild(o)}));const n=document.createElement("div");n.className="inputcontrol";return[{id:"updatelink",className:"updatelink",textContent:"Update"},{id:"removelink",className:"removelink",textContent:"Remove Link"},{id:"cancel",className:"cancel",textContent:"Close"}].forEach((e=>{const t=document.createElement("button");t.type="button",t.id=e.id,t.className=e.className,t.textContent=e.textContent,n.appendChild(t)})),t.appendChild(n),e.appendChild(t),e};document.body.appendChild(createLinkDialog());const keyboardSupport=(e,t)=>{document.addEventListener("keydown",(e=>{if("Escape"===e.key||27===e.keyCode){const{target:t}=e,o=t.dataset.block;(o||t.classList.contains("menuOnOff"))&&o&&(document.querySelector("#MN"+o).classList.remove("active"),document.querySelector("#TM"+o).classList.remove("active"))}})),e.addEventListener("keydown",(o=>{if("Enter"===o.key){const n=["SECTION","UL","OL"].includes(e.tagName)||["SECTION","UL","OL"].includes(o.target.tagName);if(o.preventDefault(),n)if(o.target.tagName.startsWith("H"))addBlock(t,e.id,"down"),e.blur();else{const e=o.target,t=e.cloneNode(!0);t.textContent="",e.insertAdjacentElement("afterend",t),t.focus()}else addBlock(t,e.id,"down"),e.blur()}if("Delete"===o.key||"Backspace"===o.key){if(["SECTION","UL","OL","TABLE","FIGURE"].includes(e.tagName)||["SECTION","UL","OL","FIGCAPTION","CAPTION","TD"].includes(o.target.tagName)){const e=o.target;if("TD"!==e.tagName&&"FIGCAPTION"!==e.tagName&&0===e.textContent.length){o.preventDefault();const t=e.previousSibling;t&&(e.remove(),t.focus())}}else if(o.target.textContent.length>1){const t=e.querySelector("br");document.execCommand("insertHTML",!1,""),t&&(o.preventDefault(),t.remove())}else{o.preventDefault();const t=document.querySelector("#TB"+e.id),n=t.previousSibling;t.remove(),n&&n.querySelector(".block").focus()}}})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertHTML",!1,""),document.execCommand("insertText",!1,t.replace(/<br[^>]*>/g,"*").replace(/[\r\n]+/g,"**"))}))},closeMenu=e=>{e.preventDefault();const t=document.querySelectorAll(".menu"),o=document.querySelectorAll(".topMenu"),n=document.querySelectorAll(".menuOnOff");for(let a=0;a<t.length;a++){const l=t[a];l.classList.contains("active")&&(l.contains(e.target)||n[a].contains(e.target)||(l.classList.remove("active"),o[a].classList.remove("active")))}},addTable=(e,t)=>{const o=prompt("Enter Number Rows:",5),n=prompt("Enter Number Columns:",4),a=document.querySelector("#"+e+" .blocks"),l=document.createElement("div");l.id=Date.now()%1e6,l.className="block",o>0&&n>0?createTable(l,o,n):createTable(l,5,4);const r=createMenuList(l.id,l,"table");if(t>0){const e=document.getElementById("TB"+t);e&&e.insertAdjacentElement("beforebegin",r)}else a.appendChild(r);l.querySelector("caption").focus(),inlineTool(e,l.id)},createTable=(e,t,o)=>{const n=e;if(!n)return void console.error("Container not found");const a=document.createElement("table");a.id="table"+e.id;const l=document.createElement("caption");setDefaultAttribute(l,e.id,"Table Caption"),a.appendChild(l);for(let n=0;n<t;n++){const t=document.createElement("tr");for(let a=0;a<o;a++){const o=document.createElement("td");setDefaultAttribute(o,e.id),o.textContent=`Row ${n+1}, Col ${a+1}`,t.appendChild(o)}a.appendChild(t)}n.appendChild(a)},addImageBlock=(e,t)=>{const o=document.querySelector("#"+e+" .blocks"),n=document.createElement("figure");n.setAttribute("tabindex","0"),n.id=Date.now()%1e6,n.className="block";const a=document.createElement("picture");a.innerHTML='<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuv7GqevqRqUgCNaskcs87rvMxqN-jENlxNQ&s" alt="" crossorigin="anonymous"/>',n.appendChild(a);const l=document.createElement("figcaption");setDefaultAttribute(l,n.id,"Image Description"),n.appendChild(l);const r=createMenuList(n.id,n,"image");if(t>0){const e=document.getElementById("TB"+t);e&&e.insertAdjacentElement("beforebegin",r)}else o.appendChild(r);l.focus(),inlineTool(e,n.id)},addVideoBlock=(e,t)=>{const o=document.querySelector("#"+e+" .blocks"),n=document.createElement("embed");n.setAttribute("tabindex","0"),n.setAttribute("crossorigin","anonymous"),n.id=Date.now()%1e6,n.className="block",n.width="315",n.height="560",n.src="https://www.youtube.com/embed/5ncnsuNm-6A?si=0FUJ5K2LWydm7oa";const a=createMenuList(n.id,n,"embed");if(t>0){const e=document.getElementById("TB"+t);e&&e.insertAdjacentElement("beforebegin",a)}else o.appendChild(a)},addBlock=(e,t,o)=>{const n=document.querySelector("#"+e+" .blocks"),a=document.createElement("p");a.id=Date.now()%1e6,a.className="block",setDefaultAttribute(a,a.id);const l=createMenuList(a.id,a,"general");if(t>0){const e=document.getElementById("TB"+t);e&&("down"===o?e.insertAdjacentElement("afterend",l):e.insertAdjacentElement("beforebegin",l))}else n.appendChild(l);a.focus(),inlineTool(e,a.id)},createMenuList=(e,t,o)=>{let n=document.createElement("div");n.dataset.block=t.id,n.id="TB"+e,n.className="tempblock";let a,l=document.createElement("button");if(l.type="button",l.className="menuOnOff",l.id="MB"+t.id,l.setAttribute("aria-haspopup",!0),l.setAttribute("aria-expanded",!1),l.setAttribute("aria-controls","MN"+e),l.dataset.block=t.id,"table"===o)a="TABLE";else if("section"===o&&t.querySelector("ol, ul")||"SECTION"===t.tagName&&t.querySelector("ol, ul")){const e=t.querySelector("ol, ul"),o=t.querySelector("h2, h3, h4, h5, h6");e&&(a=e.tagName.toUpperCase()+" "+o.tagName.toUpperCase())}else a=t.tagName;l.innerText=a,n.appendChild(l);let r=document.createElement("div");r.className="topMenu",r.id="TM"+t.id,r.role="menu",r.setAttribute("aria-label","block menu"),r.setAttribute("aria-controls",t.id);let c=document.createElement("button");c.type="button",c.className="removeBlock",c.dataset.block=t.id,c.textContent="X",c.setAttribute("aria-label","remove block id: "+t.id);let i=document.createElement("button");i.type="button",i.className="addBtnBlock",i.dataset.block=t.id,i.textContent="+Block";let s=document.createElement("button");s.type="button",s.className="addImageBlock",s.dataset.block=t.id,s.textContent="+Image";let d=document.createElement("button");d.type="button",d.className="moveUp",d.dataset.block=t.id,d.textContent="Up";let m=document.createElement("button");m.type="button",m.className="moveDown",m.dataset.block=t.id,m.textContent="Down",r.appendChild(c),r.appendChild(i),r.appendChild(s),r.appendChild(d),r.appendChild(m),n.appendChild(r);let u,b=document.createElement("ul");switch(b.className="menu",b.id="MN"+t.id,b.dataset.block=t.id,b.role="menu",b.setAttribute("aria-label","block menu"),b.setAttribute("aria-controls",t.id),b.setAttribute("aria-labelledby","MB"+t.id),o){case"section":u=[{className:"removeBlock",text:"Remove Block",title:"Remove Current Block"},{className:"editTag",text:"Edit Title Tag",title:"Edit Title Tag"},{className:"addparagraph",text:"Add Paragraph",title:"Add Paragraph"},{className:"sectionul",text:"UL Block",title:"Convert to UL Block"},{className:"sectionol",text:"OL Block",title:"Convert to OL Block"},{className:"section",text:"Section Block",title:"Convert to Section Block"},{className:"ul",text:"Unordered List",title:"Convert to Unordered List"},{className:"ol",text:"Ordered List",title:"Convert to Ordered List"}];break;case"image":u=[{className:"removeBlock",text:"Remove Image",title:"Remove Image Block"},{className:"imgUpload",text:"Upload Image",title:"Upload New Image"},{className:"imgURL",text:"Image URL",title:"Edit Image URL"},{className:"imgRemove",text:"Remove Caption",title:"Remove Caption"},{className:"imgAdd",text:"Add Caption",title:"Add Caption"},{className:"imgWidth",text:"Image Width",title:"Set Image Width"},{className:"imgHeight",text:"Image Height",title:"Set Image Height"},{className:"imgAlt",text:"Alt",title:"Edit Alt"},{className:"imgCrossOrigin",text:"CrossOrigin",title:"Edit CrossOrigin"}];break;case"embed":u=[{className:"removeBlock",text:"Remove Embed",title:"Remove Embed Block"},{className:"embedURL",text:"Embed URL",title:"Edit Embed URL"},{className:"embedWidth",text:"Width",title:"Set Media Width"},{className:"embedHeight",text:"Height",title:"Set Media Height"},{className:"embedCrossOrigin",text:"CrossOrigin",title:"Edit CrossOrigin"}];break;case"table":u=[{className:"removeBlock",text:"Remove Table",title:"Remove Table Block"},{className:"removeCaption",text:"Remove Caption",title:"Remove Table Caption"},{className:"addCaption",text:"Add Caption",title:"Add Table Caption"},{className:"addRow",text:"Add Row",title:"Add New Row"},{className:"removeRow",text:"Remove Row",title:"Remove Last Row"},{className:"addCol",text:"Add Column",title:"Add New Column"},{className:"removeCol",text:"Remove Column",title:"Remove Last Column"}];break;default:u=[{className:"removeBlock",text:"Remove",title:"Remove Block (CTRL-DELETE)"},{className:"p",text:"Paragraph",title:"Convert to Paragraph (CTRL-7)"},{className:"div",text:"DIV",title:"Convert to DIV (CTRL-0)"},{className:"h1",text:"H1 Heading",title:"Convert to H1 (CTRL-1)"},{className:"h2",text:"H2 Heading",title:"Convert to H2 (CTRL-2)"},{className:"h3",text:"H3 Heading",title:"Convert to H3 (CTRL-3)"},{className:"h4",text:"H4 Heading",title:"Convert to H4 (CTRL-4)"},{className:"h5",text:"H5 Heading",title:"Convert to H5 (CTRL-5)"},{className:"h6",text:"H6 Heading",title:"Convert to H6 (CTRL-6)"},{className:"ul",text:"Unordered List",title:"Convert to Unordered List (CTRL-8)"},{className:"ol",text:"Ordered List",title:"Convert to Ordered List (CTRL-9)"},{className:"blockquote",text:"Blockquote",title:"Convert to Blockquote Block"},{className:"sectionul",text:"UL Block",title:"Convert to UL Block"},{className:"sectionol",text:"OL Block",title:"Convert to OL Block"},{className:"section",text:"Section Block",title:"Convert to Section Block"}]}for(let e=0;e<u.length;e++){const{className:o,text:n,title:a}=u[e];if("sectionul"===o){const e=document.createElement("hr");b.appendChild(e)}const l=document.createElement("button");let r;if(l.type="button",l.dataset.block=t.id,l.className=o,l.setAttribute("aria-label",a),l.textContent=n,"section"===t.tagName.toLowerCase()){const e=t.querySelector("ul, ol");if(t.querySelector("p")){r="section";const e=b.querySelector(".addparagraph");e&&e.remove()}e&&(r="section"+e.tagName.toLowerCase())}("section"!==t.tagName.toLowerCase()&&t.tagName.toLowerCase()===o||r===o)&&(l.disabled=!0,l.setAttribute("aria-disabled",!0)),b.appendChild(l)}return n.appendChild(t),n.appendChild(b),n.appendChild(inlineToolbar(t.id)),n},inlineToolbar=e=>{const t=document.createElement("div");t.className="toolbar",t.role="toolbar",t.setAttribute("aria-label","Text Formatting"),t.setAttribute("aria-controls",e),t.id="TBAR"+e,t.dataset.block=e;const o=[{className:"removeFormattingButton",format:"remove",text:"X",title:"Remove formatting (CTRL-X)"},{className:"boldButton",format:"strong",text:"B",title:"Bold Text (CTRL-B)"},{className:"italicButton",format:"em",text:"I",title:"Italic Text (CTRL-I)"},{className:"underlineButton",format:"u",text:"U",title:"Underline Text (CTRL-U)"},{className:"quoteButton",format:"q",text:'"',title:"Insert quotation marks (CTRL-Q)"},{className:"markButton",format:"mark",text:"Mark",title:"Marked text (CTRL-M)"},{className:"delButton",format:"del",text:"del",title:"Deleted Text (CTRL-D)"},{className:"codeButton",format:"code",text:"Code",title:"Inline Code (CTRL-O)"},{className:"abbr",format:"abbr",text:"a?",title:"Acronym (CTRL-E)"},{className:"kbd",format:"kbd",text:"kbd",title:"Keyboard Element (CTRL-K)"},{className:"insertLink",format:"addlink",text:"+Link",title:"Insert Link (CTRL-L)"}];for(let n=0;n<o.length;n++){const a=o[n],l=document.createElement("button");l.type="button",l.className=a.className+" format",l.ariaLabel=a.title,l.dataset.block=e,l.dataset.format=a.format,l.innerHTML=a.text,t.appendChild(l)}return t},removeAbbrIfMatches=e=>{document.querySelectorAll(".editor p abbr, .editor ul abbr, .editor ol abbr").forEach((t=>{if(t.textContent===e){const e=t.parentNode,o=document.createTextNode(t.textContent);e.replaceChild(o,t)}}))},insertAbbr=(e,t)=>{if(!Array.isArray(e))return void console.error("The first argument must be an array of words.");const o=new RegExp("\\b("+e.join("|")+")\\b(?![^<]*</abbr>)","gi");document.querySelectorAll(".editor p, .editor ul, .editor ol").forEach((function(e){e.innerHTML=e.innerHTML.replace(o,(function(e){return'<abbr title="'+t+'">'+e+"</abbr>"}))}))},getNode=(e,t)=>{const o=document.querySelectorAll(e);let n=null;return o.forEach((e=>{e.textContent.includes(t)&&(n=e)})),n},removeEmptyAttributes=()=>{document.querySelectorAll("*").forEach((e=>{Array.from(e.attributes).forEach((t=>{""===t.value&&e.removeAttribute(t.name)}))}))};function generate(e){const t=document.querySelector("#"+e+" .results"),o=document.querySelector("#"+e+" .generate");t.value="";const n=document.querySelectorAll("#"+e+" .blocks .block");removeEmptyAttributes();let a=[];for(let e=0;e<n.length;e++){const t=n[e];t.innerHTML=t.innerHTML.replace(/<br>|<strong><\/strong>|<mark><\/mark>|<del><\/del>|<q><\/q>|<u><\/u>|<em><\/em>|<figcaption><\/figcaption>|<caption><\/caption>|<code><\/code>/g,"");const o=t.cloneNode(!0);o.removeAttribute("contenteditable"),o.removeAttribute("tabindex"),o.removeAttribute("id"),o.removeAttribute("class"),o.removeAttribute("role"),o.removeAttribute("inputmode"),o.removeAttribute("aria-current"),o.removeAttribute("data-placeholder"),o.removeAttribute("data-block"),o.removeAttribute("spellcheck");o.querySelectorAll("*").forEach((e=>{e.hasAttribute("id")&&e.removeAttribute("id"),e.hasAttribute("inputmode")&&e.removeAttribute("inputmode"),e.hasAttribute("spellcheck")&&e.removeAttribute("spellcheck"),e.hasAttribute("class")&&e.removeAttribute("class"),Array.from(e.attributes).forEach((t=>{(t.name.startsWith("aria-")||t.name.startsWith("data-")||"tabindex"===t.name||"inputmode"===t.name||"spellcheck"===t.name||"role"===t.name||"contenteditable"===t.name)&&e.removeAttribute(t.name)}))})),o.innerHTML=o.innerHTML.replace(/<br>|<strong><\/strong>|<mark><\/mark>|<del><\/del>|<q><\/q>|<u><\/u>|<em><\/em>|<span><\/span>|<figcaption><\/figcaption>|<caption><\/caption>|<code><\/code>/g,""),cleanUpNestedTags(o),o.innerHTML=o.innerHTML.replace(/<br[^>]*>/g,""),o.innerHTML=o.innerHTML.replace(/<li[^>]*>\s*<\/li>/g,""),o.innerHTML=o.innerHTML.replace(/id="table[^"]*"/g,""),"embed"===o.tagName.toLowerCase()&&console.log("embed"+o.innerHTML),("embed"===o.tagName.toLowerCase()||"figure"===o.tagName.toLowerCase()||""!==o.textContent.trim()&&""!==o.innerHTML.trim())&&a.push(o.outerHTML)}let l=a.join("\n");l=l.replace(/<br[^>]*>/g,"").replace(/\n/g,""),l=l.replace(/[\r\n]+/g,"");let r=sanitizeHtml(l);t.value=r;const c=countWords(r);if(c>1){const o=document.getElementById("counter"+e);o&&o.remove();const n=document.createElement("p");n.id="counter"+e,n.textContent="Total Word: "+c,t.insertAdjacentElement("beforebegin",n)}l.length>10&&localStore.save(e,replaceAngleBrackets(r)),setTimeout((()=>{o.textContent="Generate"}),2e3)}const cleanUpNestedTags=e=>{const t=["strong","em","b","i","br","span"];for(let o=0;o<t.length;o++){const n=t[o],a=e.getElementsByTagName(n);for(let e=a.length-1;e>=0;e--){const t=a[e];if(t.parentNode&&t.parentNode.tagName.toLowerCase()===n){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}}},setCarats=e=>{"UL"!==e.tagName&&"OL"!==e.tagName&&e.getAttribute("contenteditable")&&(e.focus(),window.getSelection().selectAllChildren(e),window.getSelection().collapseToEnd())},convertToTag=(e,t,o)=>{const n=document.getElementById(t),a=(document.querySelector("#"+e+" .blocks"),n),l=n.tagName,r=n.innerText;let c,i;switch(o){case"section":i="SECTION",c=document.createElement("section"),c.id=t,c.className="block";const e=document.createElement("h2");if(setDefaultAttribute(e,n.id,"Write a Section Title"),"SECTION"===l){const t=n.querySelector("h2, h3, h4, h5, h6");e.innerText=t.textContent}c.appendChild(e);const a=n.querySelector("ol, ul");if("OL"===l||"UL"===l||"SECTION"===l&&a){const e=n.querySelectorAll("li");for(let o=0;o<e.length;o++){const n=e[o],a=document.createElement("p");setDefaultAttribute(a,t),a.innerHTML=n.innerHTML,c.appendChild(a)}}else{const e=document.createElement("p");setDefaultAttribute(e,t),e.innerText=r.replace(/<br[^>]*>/g,"").replace(/[\r\n]+/g,""),c.appendChild(e)}const s=createMenuList(t,c,"section");document.getElementById("TB"+t).replaceWith(s);break;case"sectionol":case"sectionul":let d=o.replace(/section/g,"");i=d.toUpperCase()+" H2",c=document.createElement("section"),c.id=t,c.className="block";const m=document.createElement("h2");if(setDefaultAttribute(m,t,"Write a Section Title"),"SECTION"===l){const e=n.querySelector("h2, h3, h4, h5, h6");m.innerText=e.textContent}else m.innerText=d.toUpperCase()+" Section Title";c.appendChild(m);const u=document.createElement(d);u.dataset.block=t;const b=n.querySelector("p"),p=n.querySelector("ol, ul");if("OL"===l||"UL"===l||"SECTION"===l&&p){const e=n.querySelectorAll("li");if(e)for(let o=0;o<e.length;o++){const n=e[o],a=document.createElement("li");setDefaultAttribute(a,t),a.innerHTML=n.innerHTML,u.appendChild(a)}}else if("SECTION"===l&&b){const e=n.querySelectorAll("p");for(let o=0;o<e.length;o++){const n=e[o],a=document.createElement("li");setDefaultAttribute(a,t),a.innerHTML=n.innerHTML,u.appendChild(a)}}else{const e=document.createElement("li");setDefaultAttribute(e,t),e.innerText=r,u.appendChild(e)}c.appendChild(u);const g=createMenuList(t,c,"section");document.getElementById("TB"+t).replaceWith(g),u.lastElementChild.focus();break;case"ol":case"ul":if(i=o.toUpperCase(),c=document.createElement(o),c.id=t,c.className="block","OL"===l||"UL"===l||"SECTION"===l){const e=n.querySelectorAll("li");for(let o=0;o<e.length;o++){const n=e[o],a=document.createElement("li");setDefaultAttribute(a,t),a.innerHTML=n.innerHTML,c.appendChild(a)}}else{const e=document.createElement("li");setDefaultAttribute(e,t),e.innerText=r,c.appendChild(e)}if("SECTION"===l){const e=createMenuList(t,c,"general");document.getElementById("TB"+t).replaceWith(e)}else n.replaceWith(c);c.lastElementChild.focus();break;case"pre":i="Code Block",c=document.createElement("pre"),c.id=t,setDefaultAttribute(c,t),c.className="block";const h=document.createElement("code");h.setAttribute("contenteditable",!0),h.id=t,h.innerText=r.replace(/<br[^>]*>/g,"").replace(/[\r\n]+/g,""),c.appendChild(h),n.replaceWith(c);break;default:i=o.toUpperCase(),c=document.createElement(o),c.id=t,setDefaultAttribute(c,t),c.className="block",c.innerText=r.replace(/<br[^>]*>/g,"").replace(/[\r\n]+/g,""),n.replaceWith(c)}inlineTool(e,t),"pre"===o?c.querySelector('contenteditable="true"').focus():c.focus();const s=a.querySelector("ol, ul"),d=a.querySelector("p");let m;if("SECTION"===l){if(s){const e="section"+a.querySelector("ol, ul").tagName;m=document.querySelector("#MN"+t+" ."+e.toLowerCase()),m.disabled=!1,m.setAttribute("aria-disabled",!1)}d&&(m=document.querySelector("#MN"+t+" .section"),m&&(m.disabled=!1,m.setAttribute("aria-disabled",!0)))}else m=document.querySelector("#MN"+t+" ."+o),m.disabled=!0,m.setAttribute("aria-disabled",!0);document.querySelector("#TB"+t+" .menuOnOff").innerText=i,document.querySelector("#MN"+t).classList.remove("active"),document.querySelector("#TM"+t).classList.remove("active")};async function readClipboard(){try{const e=await navigator.clipboard.readText();document.execCommand("insertText",!1,e)}catch(e){console.error("Failed to read clipboard contents: ",e)}}const inlineTool=(e,t)=>{const o=document.getElementById(e),n=document.getElementById(t),a=document.getElementById("TBAR"+t)||document.querySelector("#TB"+t+" .toolbar"),l=a.querySelectorAll(".format"),r=document.querySelector(".linkTarget"),c=[],i=[];let s,d=null;const m=()=>{c.push(n.innerHTML),i.length=0};n.addEventListener("input",debounce((e=>{if(!/Mobi|Android|iPad|iPhone/i.test(navigator.userAgent)){const t=e.target.innerHTML;t&&t.charAt(0)!==t.charAt(0).toUpperCase()&&(e.target.innerHTML=t.charAt(0).toUpperCase()+t.slice(1)),e.target.innerHTML=e.target.innerHTML.split(/(?<=[.?!])\s+/).map((e=>e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e)).join(" "),setCarats(e.target)}m()}),300)),n.addEventListener("focus",(()=>{m()})),keyboardSupport(n,e),window.getSelection?s=window.getSelection():document.selection&&(s=document.selection.createRange()),document.addEventListener("selectionchange",debounce((()=>{s&&console.log("Selected: "+s.toString())}),500)),o.addEventListener("click",(e=>{const t=e.target.tagName;if(["A","KBD","ABBR","STRONG","Q","EM","U","CODE","MARK","DEL"].includes(t)){if(a.querySelectorAll(".disabled").forEach((e=>{e.classList.remove("disabled"),e.setAttribute("aria-disabled",!1)})),"A"!==t){const t=document.createRange();t.selectNodeContents(e.target),s.removeAllRanges(),s.addRange(t),a.querySelector('[data-format="'+e.target.tagName.toLowerCase()+'"]').classList.add("disabled"),a.querySelector('[data-format="'+e.target.tagName.toLowerCase()+'"]').setAttribute("aria-disabled",!0)}else h(e)}else{a.querySelectorAll(".disabled").forEach((e=>{e.classList.remove("disabled")}))}})),l.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.format;if(t)switch(t){case"addlink":p();break;case"abbr":b();break;case"remove":g();break;default:u(t)}}))})),n.addEventListener("keydown",(t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();const o=document.querySelector("#"+e+" .blocks");let a=n.closest(".tempblock");switch(t.key){case"ArrowRight":if(a&&a.nextElementSibling){const e=a.nextElementSibling.querySelector(".block"),t=e.querySelector("table");if(t){t.querySelector("td:first-child").focus()}else"SECTION"===e.tagName||["OL","UL"].includes(e.tagName)?e.firstElementChild.focus():e.focus();e.scrollIntoView({behavior:"instant",block:"nearest"})}break;case"ArrowLeft":if(a&&a.previousElementSibling){const e=a.previousElementSibling.querySelector(".block"),t=e.querySelector("table");if(t){t.querySelector("td:first-child").focus()}else"SECTION"===e.tagName||["OL","UL"].includes(e.tagName)?e.firstElementChild.focus():e.focus();e.scrollIntoView({behavior:"instant",block:"nearest"})}break;case"ArrowDown":if(a&&a.nextElementSibling){o.insertBefore(a.nextElementSibling,a);const e=a.querySelector(".block"),t=e.querySelector("table");if(t){t.querySelector("td:last-child").focus()}else["SECTION","OL","UL"].includes(e.tagName)?e.lastElementChild.focus():e.focus();e.classList.add("highlight"),setTimeout((()=>e.classList.remove("highlight")),1e3),e.scrollIntoView({behavior:"instant",block:"nearest"})}break;case"ArrowUp":if(a&&a.previousElementSibling){o.insertBefore(a,a.previousElementSibling);const e=a.querySelector(".block"),t=e.querySelector("table");if(t){t.querySelector("td:last-child").focus()}else["SECTION","OL","UL"].includes(e.tagName)?e.lastElementChild.focus():e.focus();e.classList.add("highlight"),setTimeout((()=>e.classList.remove("highlight")),1e3),e.scrollIntoView({behavior:"instant",block:"nearest"})}break;case"Delete":const t=document.querySelector("#MN"+n.id+" button.removeBlock");if(t&&t.click(),a&&a.nextElementSibling){const e=a.nextElementSibling.querySelector(".block"),t=e.querySelector("table");if(t){t.querySelector("td:first-child").focus()}else"SECTION"===e.tagName||["OL","UL"].includes(e.tagName)?e.firstElementChild.focus():e.focus();e.scrollIntoView({behavior:"instant",block:"nearest"})}break;case"1":convertToTag(e,n.id,"h1");break;case"2":convertToTag(e,n.id,"h2");break;case"3":convertToTag(e,n.id,"h3");break;case"4":convertToTag(e,n.id,"h4");break;case"5":convertToTag(e,n.id,"h5");break;case"6":convertToTag(e,n.id,"h6");break;case"7":convertToTag(e,n.id,"p");break;case"8":convertToTag(e,n.id,"ol");break;case"9":convertToTag(e,n.id,"ul");break;case"0":convertToTag(e,n.id,"div");break;case"a":const l=document.createRange(),r=document.querySelector('[contenteditable="true"]');l.selectNodeContents(r),s.removeAllRanges(),s.addRange(l);break;case"b":u("strong");break;case"c":document.execCommand("copy");break;case"d":u("del");break;case"e":b();break;case"g":document.querySelector("#"+e+" .preview").click();break;case"i":u("em");break;case"j":document.querySelector("#TB"+n.id+" .menuOnOff").click();break;case"k":u("kbd");break;case"l":p();break;case"m":u("mark");break;case"o":u("code");break;case"q":u("q");break;case"u":u("u");break;case"v":readClipboard();break;case"x":g();break;case"y":i.length>0&&(c.push(n.innerHTML),n.innerHTML=i.pop());break;case"z":c.length>0&&(i.push(n.innerHTML),n.innerHTML=c.pop())}}else debounce((()=>{m()}),500);t.metaKey&&t.shiftKey&&"Z"===t.key&&(t.preventDefault(),document.execCommand("redo"))}));const u=e=>{if(s.rangeCount>0){const t=s.getRangeAt(0),o=t.extractContents(),n=o.textContent.trim();if(0===o.textContent.length)return void alert("Please select some text to apply the style.");let a=n;"kbd"===e&&(a=n.toUpperCase());const l=document.createTextNode(a),r=o.parentNode;if(r&&r.nodeName.toLowerCase()===e)r.textContent=n;else{const n=document.createElement(e);let a;o.textContent.endsWith(" ")&&(a=document.createTextNode(" "),t.insertNode(a)),n.appendChild(l),t.insertNode(n)}m()}},b=()=>{if(!s.rangeCount)return;const e=s.toString().trim();if(0===e.length)return;const t=s.getRangeAt(0);let o="";const n=getNode("abbr",e);n&&(o=n.title);const a=prompt("Acronym Title:",o||"");if(a){const o=t.extractContents(),n=document.createElement("abbr");let l;n.title=capitalizeWords(a),n.textContent=e,t.deleteContents(),o.textContent.endsWith(" ")&&(l=document.createTextNode(" "),t.insertNode(l)),t.insertNode(n),insertAbbr([e],capitalizeWords(a))}},p=()=>{if(!s.rangeCount)return;const e=s.toString().trim();if(0===e.length)return;let t="";const o=getNode("a",e);o&&(t=o.href);const a=prompt("Enter the link URL:",t||"https://");if(a){const t=s.getRangeAt(0),o=t.extractContents(),l=document.createElement("a");let r;l.href=a,l.target="_self",l.rel="noopener",l.dataset.block=n.id,l.textContent=e,t.deleteContents(),o.textContent.endsWith(" ")&&(r=document.createTextNode(" "),t.insertNode(r)),t.insertNode(l),l.addEventListener("click",h)}},g=()=>{if(!s.rangeCount)return;const e=s.getRangeAt(0),t=e.toString().trim();if(0===t.length)return;const o=(e.commonAncestorContainer.nodeType===Node.TEXT_NODE?e.commonAncestorContainer.parentNode:e.commonAncestorContainer).tagName;if("ABBR"===o){const e=s.toString();n=e,document.querySelectorAll(".editor p abbr, .editor ul abbr, .editor ol abbr").forEach((e=>{if(e.textContent===n){const t=e.parentNode,o=document.createTextNode(e.textContent);t.replaceChild(o,e)}}))}else if("KBD"===o||"DEL"===o||"STRONG"===o||"Q"===o||"EM"===o||"U"===o||"CODE"===o||"MARK"===o){const t=e.commonAncestorContainer.nodeType===Node.TEXT_NODE?e.commonAncestorContainer.parentNode:e.commonAncestorContainer,o=s.toString(),n=document.createTextNode(o);t.parentNode.replaceChild(n,t),s.removeAllRanges()}else{const o=s.toString(),n=document.createTextNode(t);if(e.deleteContents(),o.endsWith(" ")){const t=document.createTextNode(" ");e.insertNode(t)}e.insertNode(n),s.removeAllRanges();const a=document.createRange();a.selectNodeContents(n),a.collapse(!1),s.addRange(a)}var n},h=e=>{e.preventDefault(),d=e.target,document.getElementById("url").value=d.getAttribute("href"),document.getElementById("rel").value=d.rel,document.getElementById("target").value=d.target,document.getElementById("linkText").value=d.textContent,document.getElementById("block").value=d.dataset.block,document.querySelector(".linkdialog").showModal()};document.querySelector(".updatelink").addEventListener("click",(()=>{d&&d.dataset.block===document.getElementById("block").value&&(d.href=document.getElementById("url").value,d.rel=document.getElementById("rel").value,d.target=document.getElementById("target").value,d.textContent=document.getElementById("linkText").value,document.querySelector(".linkdialog").close())})),document.querySelector(".removelink").addEventListener("click",(()=>{if(d){const e=d.textContent;d.replaceWith(e),document.querySelector(".linkdialog").close()}})),document.querySelector(".cancel").addEventListener("click",(()=>{document.querySelector(".linkdialog").close()})),r.addEventListener("change",(e=>{e.preventDefault(),document.getElementById("updatelink").click()}))},capitalizeWords=e=>e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),tableOption=(e,t)=>{const o=document.getElementById("table"+e),n=o.rows.length;switch(t){case"addRow":const a=o.insertRow(-1),l=o.rows[0].cells.length;for(let t=0;t<l;t++){const o=a.insertCell(t);setDefaultAttribute(o,e),o.innerHTML="New Row, Cell "+(t+1)}break;case"removeRow":n>1?o.deleteRow(n-1):alert("Cannot remove the header row.");break;case"addColumn":for(let t=0;t<n;t++){const n=o.rows[t].insertCell(-1);setDefaultAttribute(n,e),n.innerHTML="New Cell "+(t+1)}break;case"removeColumn":if(o.rows[0].cells.length>1)for(let e=0;e<n;e++)o.rows[e].deleteCell(-1);else alert("Cannot remove the last column.");break;case"removeCaption":const r=o.querySelector("caption");r&&o.removeChild(r);break;case"addCaption":const c=document.createElement("caption");setDefaultAttribute(c,e,"Table Caption"),o.appendChild(c);break;default:console.warn("Unknown option:",t)}},imageOption=(e,t)=>{const o=document.getElementById(e),n=o?.querySelector("img");if(!n)return void console.error(`Image element not found in block with ID: ${e}`);let a;switch(t){case"alt":a=prompt("Image Alt:",n.alt),a&&(n.alt=a);break;case"crossorigin":a=prompt('Image CrossOrigin: "user credentials" "anonymous"',n.getAttribute("crossorigin")),a&&n.setAttribute("crossorigin",a);break;case"link":a=prompt("Image Link:",n.src),a&&(n.src=a);break;case"width":a=prompt("Image Width:",n.width),a&&(n.width=a);break;case"height":a=prompt("Image Height:",n.height),a&&(n.height=a);break;case"removeCaption":const l=o.querySelector("figcaption");l?o.removeChild(l):console.warn("No caption found to remove.");break;case"addCaption":const r=document.createElement("figcaption");setDefaultAttribute(r,e,"Image Description"),o.appendChild(r);break;default:console.error("Invalid option: "+t)}},embedOption=(e,t)=>{const o=document.getElementById(e);if(!o)return void console.error(`Element with ID ${e} not found.`);let n;switch(t){case"link":n=prompt("Embed Link:",o.src),n&&(o.src=n);break;case"crossorigin":n=prompt('Embed CrossOrigin: "user credentials" "anonymous"',o.getAttribute("crossorigin")),n&&o.setAttribute("crossorigin",n);break;case"width":n=prompt("Embed Width: ",o.width),n&&(o.width=n);break;case"height":n=prompt("Embed Height: ",o.height),n&&(o.height=n);break;default:console.error("Invalid option: "+t)}},sectionOption=(e,t)=>{const o=document.getElementById(e);if(!o)return void console.error(`Element with ID ${e} not found.`);switch(t){case"tag":const n=o.querySelector("h2, h3, h4, h5, h6"),a=o.querySelector("ol, ul"),l=["H2","H3","H4","H5","H6"];let r=prompt("Change Title Tag To:",n.tagName);if(r&&l.includes(r.toUpperCase())){const t=document.createElement(r);Array.from(n.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.textContent=n.textContent,n.parentNode.replaceChild(t,n),document.querySelector("#TB"+e+" .menuOnOff").innerText=a.tagName.toUpperCase()+" "+r.toUpperCase(),document.querySelector("#MN"+e).classList.remove("active"),t.focus()}else alert("Invalid tag name. Please enter one of the following: H2, H3, H4, H5, H6.");break;case"addparagraph":const c=o.querySelector("ol, ul");if(c){const t=document.createElement("p");setDefaultAttribute(t,e),c.parentNode.insertBefore(t,c),t.focus()}else console.log("No list found to add a paragraph before.");break;default:console.error("Invalid option: "+t)}};function imageUpload(e){const t=document.getElementById("form-upload");t&&t.remove();const o=document.createElement("form");o.enctype="multipart/form-data",o.id="form-upload",o.style.display="none";const n=document.createElement("input");n.type="file",n.name="file[]",n.multiple=!0,o.appendChild(n),document.body.prepend(o),n.click(),"undefined"!=typeof timer&&clearInterval(timer),timer=setInterval((function(){if(""!==n.value){clearInterval(timer);const t=new FormData(o);fetch("index.php?route=common/filemanager/upload&token=<?php echo $token; ?>&directory="+"",{method:"POST",body:t}).then((e=>e.json())).then((t=>{if(console.log("Upload: "+t.file.url),t.error&&alert(t.error),t.success){document.getElementById(e).querySelector("img").src=t.file.url}})).catch((e=>{alert(e)})).finally((()=>{}))}}),500)}function processContent(e,t){const o=document.getElementById(t).value.replace(/[\r\n]+/g," ").replace(/\s{2,}/g," ").replace(/>\s+</g,"><").replace(/<span[^>]*>(.*?)<\/span>/gi,"$1"),n=(new DOMParser).parseFromString(o,"text/html"),a=n.querySelectorAll("a");n.querySelectorAll("span").forEach((e=>e.remove()));n.querySelectorAll("br").forEach((e=>e.remove()));const l=document.querySelector("#"+e+" .blocks");l.innerHTML="";let r=Date.now()%1e4;if(a.length>0)for(let e=0;e<a.length;e++)a[e].dataset.block=r;const c=n.body.childNodes;for(let t=0;t<c.length;t++){const o=c[t];if(o.nodeType===Node.ELEMENT_NODE){const t=o.tagName.toLowerCase();let n;if("section"===t){const e=o.querySelector("h2, h3, h4, h5, h6"),t=o.querySelector("ul, ol"),a=o.querySelector("p");n=document.createElement("section"),n.className="block",n.id=r;const l=document.createElement(e.tagName);let c,i;if(setDefaultAttribute(l,r,"Write a "+e.tagName+" Section Title"),l.innerText=e.textContent,n.appendChild(l),t){c=t.tagName,i="li";const e=o.querySelectorAll("p");if(e)for(let t=0;t<e.length;t++){const o=e[t],a=document.createElement("p");setDefaultAttribute(a,r),a.innerHTML=o.innerHTML,n.appendChild(a)}const a=document.createElement(c);a.dataset.block=r;const l=o.querySelectorAll(i);for(let e=0;e<l.length;e++){const t=l[e],o=document.createElement(i);setDefaultAttribute(o,r),o.innerHTML=t.innerHTML,a.appendChild(o)}n.appendChild(a)}if(a&&!t){c=a.tagName,i="p";const e=o.querySelectorAll(i);for(let t=0;t<e.length;t++){const o=e[t],a=document.createElement(i);setDefaultAttribute(a,r),a.innerHTML=o.innerHTML,n.appendChild(a)}}}else if("ul"===t||"ol"===t){n=document.createElement(t),n.className="block",n.id=r;const e=o.querySelectorAll("li");for(let t=0;t<e.length;t++){const o=e[t],a=document.createElement("li");setDefaultAttribute(a,r),a.innerHTML=o.innerHTML,n.appendChild(a)}}else if("img"===t){n=document.createElement("figure"),n.setAttribute("tabindex","0"),n.id=r,n.className="block";const e=document.createElement("picture"),t=document.createElement("img");t.src=o.src;const a=document.createElement("figcaption");setDefaultAttribute(a,r,"Image Description"),e.appendChild(t),n.appendChild(e),n.appendChild(a)}else{const e=(new DOMParser).parseFromString(o.innerHTML,"text/html"),a=e.querySelector("table"),l=e.querySelectorAll("caption"),c=e.querySelectorAll("td"),i=e.querySelectorAll("figcaption");if(c.length>0)for(let e=0;e<c.length;e++)setDefaultAttribute(c[e],r),c[e].dataset.block=r;if(l.length>0)for(let e=0;e<l.length;e++)setDefaultAttribute(l[e],r,"Table Caption"),l[e].dataset.block=r;if(a&&(a.id="table"+r),i.length>0)for(let e=0;e<i.length;e++)setDefaultAttribute(i[e],r,"Image Description"),i[e].dataset.block=r;o.innerHTML=e.body.innerHTML,n=document.createElement(t),n.innerHTML=o.innerHTML,setDefaultAttribute(n,r),n.id=r,n.className="block","embed"===t&&(n.src=o.src,n.width=o.width,n.height=o.height,n.removeAttribute("contenteditable")),(o.innerHTML.includes("<table")||/<table\b[^>]*>/i.test(o.innerHTML))&&n.removeAttribute("contenteditable"),"figure"===t&&n.removeAttribute("contenteditable")}if("section"===t){const e=createMenuList(r,n,"section");l.appendChild(e)}else if("figure"===t||"img"===t){const e=createMenuList(r,n,"image");l.appendChild(e)}else if("embed"===t){const e=createMenuList(r,n,"embed");l.appendChild(e)}else if(o.innerHTML.includes("<table")||/<table\b[^>]*>/i.test(o.innerHTML)){const e=createMenuList(r,n,"table");l.appendChild(e)}else{const e=createMenuList(r,n,"general");l.appendChild(e)}inlineTool(e,r);const a=document.querySelectorAll("[contenteditable]");for(let e=0;e<a.length;e++)a[e].setAttribute("contenteditable",!1);r++}}}function sanitizeHtml(e){const t=document.createElement("div");t.innerHTML=e;const o=["section","code","kbd","abbr","b","i","em","strong","q","mark","del","a","p","u","ul","ol","li","h1","h2","h3","h4","h5","h6","img","table","tr","td","embed"];return function e(t){if(t.nodeType===Node.ELEMENT_NODE){if(!o.includes(t.tagName.toLowerCase()))return void t.remove();const n=[];for(let e of Array.from(t.attributes))"href"!==e.name&&"target"!==e.name&&n.push(e.name);for(let e of n)t.removeAttribute(e);for(let o of Array.from(t.childNodes))e(o)}}(t),t.innerHTML}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".results");for(let t=0;t<e.length;t++){const o=e[t],n=o.getAttribute("data-editor");""!==o.value.trim()?processContent(n,o.id):addBlock(n,!1)}}));const replaceAngleBrackets=e=>e.replace(/</g,"/**").replace(/>/g,"**/"),restoreAngleBrackets=e=>e.replace(/\/\*\*/g,"<").replace(/\*\*\//g,">"),localStore={save:(e,t)=>{const o=new Date;localStorage.setItem(e,t),localStorage.setItem(e+"-date",o.toISOString())},load:(e,t)=>{const o=localStorage.getItem(e);o&&(document.getElementById("results"+e).innerHTML=o)},clear:e=>{localStorage.removeItem(e)}},setDefaultAttribute=(e,t,o)=>e&&"function"==typeof e.setAttribute?(e.setAttribute("contenteditable",!0),e.setAttribute("tabindex","0"),e.setAttribute("role","textbox"),e.setAttribute("data-placeholder",o||"Type something..."),e.dataset.block=t,e):(console.error("Invalid element passed to setDefaultAttribute:",e),null),countWords=e=>{const t=document.createElement("div");t.innerHTML=e;return(t.innerText??t.textContent).trim().split(/\s+/).length};
</script>
</body>
</html>
